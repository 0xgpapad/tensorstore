

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>json Driver &mdash; TensorStore  documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/sphinx_rtd_theme_table_word_wrap_fix.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"displayAlign": "left"})</script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="zarr Driver" href="../zarr/index.html" />
    <link rel="prev" title="array Driver" href="../array/index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> TensorStore
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Building and Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../environment.html">Environment variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../index_space.html">Index space</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../context.html">Context framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../spec.html">TensorStore JSON Spec</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Drivers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cast/index.html"><code class="docutils literal notranslate"><span class="pre">cast</span></code> Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../downsample/index.html"><code class="docutils literal notranslate"><span class="pre">downsample</span></code> Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../array/index.html"><code class="docutils literal notranslate"><span class="pre">array</span></code> Driver</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#single-file-drivers">Single file drivers</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">json</span></code> Driver</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#json-schema">JSON Schema</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#chunked-storage-drivers">Chunked storage drivers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../kvstore/index.html">Key-Value Storage Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python/index.html">Python API</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TensorStore</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Drivers</a> &raquo;</li>
        
      <li><code class="docutils literal notranslate"><span class="pre">json</span></code> Driver</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="json-driver">
<h1><code class="docutils literal notranslate"><span class="pre">json</span></code> Driver<a class="headerlink" href="#json-driver" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">json</span></code> driver provides read/write access to JSON values stored in any
supported <a class="reference internal" href="../../kvstore/index.html#key-value-store"><span class="std std-ref">Key-Value Storage Layer</span></a>.  JSON values are accessed as rank-0 arrays
with <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“json”</span></span></code> data type.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Even if the JSON value is itself an array value, TensorStore still exposes it
as a rank-0 array of a single JSON value.</p>
</div>
<p>Sub-values within a JSON file may be specified using JSON Pointer syntax
(<span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc6901.html"><strong>RFC 6901</strong></a>), and TensorStore guarantees consistency in the presence of
concurrent writes because writes are implemented as atomic read-modify-write
operations to individual JSON Pointers.  If two processes concurrently write to
non-overlapping pointers within the same JSON file, it is guaranteed that
neither write will be lost.</p>
<div class="section" id="json-schema">
<span id="json-schema-https://github.com/google/tensorstore/json-schema/driver/json"></span><h2>JSON Schema<a class="headerlink" href="#json-schema" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">object</span></code> with members:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 0%" />
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">driver</span></code><div class="docutils container">
<strong>Required</strong></div>
</td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“json”</span></span></code></div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">context</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context"><span class="std std-ref">Context</span></a></span></div>
<p>Specifies context resources that augment/override the parent context.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">dtype</span></code></td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“json”</span></span></code></div>
<p>Optional.  If specified, must be <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“json”</span></span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">rank</span></code></td>
<td><div class="docutils container">
<code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">0</span></span></code></div>
<p>Optional.  If specified, must be <code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">0</span></span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">transform</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../index_space.html#json-schema-https://github.com/google/tensorstore/json-schema/index-transform"><span class="std std-ref">Index transform</span></a></span></div>
<p>Specifies a transform.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">kvstore</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../kvstore/index.html#json-schema-https://github.com/google/tensorstore/json-schema/key-value-store"><span class="std std-ref">Key-Value Store</span></a></span></div>
<p>Specifies the underlying storage mechanism.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">path</span></code></td>
<td><div class="docutils container">
string</div>
<p>Path to the JSON file within the <a class="reference internal" href="../../kvstore/index.html#json-schema-https://github.com/google/tensorstore/json-schema/key-value-store"><span class="std std-ref">Key-Value Store</span></a> specified by <code class="docutils literal notranslate"><span class="pre">kvstore</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;path/to/data.json&quot;</span>
</pre></div>
</div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">cache_pool</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context-resource"><span class="std std-ref">Context resource</span></a></span> (default is <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“cache_pool”</span></span></code>)</div>
<p>Specifies or references a previously defined <a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context/cache_pool"><span class="std std-ref">cache_pool context resource</span></a>. It is normally more convenient to specify a default <code class="docutils literal notranslate"><span class="pre">cache_pool</span></code> in the <code class="docutils literal notranslate"><span class="pre">context</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">data_copy_concurrency</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context-resource"><span class="std std-ref">Context resource</span></a></span> (default is <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“data_copy_concurrency”</span></span></code>)</div>
<p>Specifies or references a previously defined <a class="reference internal" href="../../../context.html#json-schema-https://github.com/google/tensorstore/json-schema/context/data_copy_concurrency"><span class="std std-ref">data_copy_concurrency context resource</span></a>. It is normally more convenient to specify a default <code class="docutils literal notranslate"><span class="pre">data_copy_concurrency</span></code> in the <code class="docutils literal notranslate"><span class="pre">context</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">recheck_cached_data</span></code></td>
<td><div class="docutils container">
<span><a class="reference internal" href="../index.html#json-schema-https://github.com/google/tensorstore/json-schema/cache-revalidation-bound"><span class="std std-ref">Cache revalidation bound</span></a></span> (default is <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“open”</span></span></code>)</div>
<p>Time after which cached data is assumed to be fresh.  Cached data older
than the specified time is revalidated prior to being returned from a
read operation.  Writes are always consistent regardless of the value of
this option.</p>
<p>Specifying <code class="code highlight json docutils literal notranslate"><span class="keyword constant"><span class="pre">true</span></span></code> means that the data will be revalidated prior to
every read operation.  With the default value of <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“open”</span></span></code>, any
cached data is revalidated when the TensorStore is opened but is not
rechecked for each read operation.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">json_pointer</span></code></td>
<td><div class="docutils container">
string (default is <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“”</span></span></code>)</div>
<p>JSON Pointer (<span class="target" id="index-1"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc6901.html"><strong>RFC 6901</strong></a>) specifying a path within the JSON file.  With
the default value of <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“”</span></span></code>, read and write operations apply to the
entire JSON file.  Specifying a non-empty pointer permits
reading/writing a sub-value within the full JSON file.  For example, if
the full JSON file contains <code class="code highlight json docutils literal notranslate"><span class="punctuation"><span class="pre">{</span></span><span class="name tag"><span class="pre">“a”</span></span><span class="punctuation"><span class="pre">:</span></span> <span class="punctuation"><span class="pre">{</span></span><span class="name tag"><span class="pre">“b”</span></span><span class="punctuation"><span class="pre">:</span></span> <span class="literal number integer"><span class="pre">42</span></span><span class="punctuation"><span class="pre">}}</span></span></code>, specifying a
<code class="docutils literal notranslate"><span class="pre">json_pointer</span></code> of <code class="code highlight json docutils literal notranslate"><span class="literal string double"><span class="pre">“/a/b”</span></span></code> refers to the value
<code class="code highlight json docutils literal notranslate"><span class="literal number integer"><span class="pre">42</span></span></code>.  If the pointer refers to a non-existent member, read
operations return an error.  Write operations attempt to create the
member (and any ancestor objects), and return an error if the pointer is
inconsistent with the existing value; for example, it is an error to
write to a pointer that references a member of a non-object, non-array
value.</p>
</td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Example</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> 
  <span class="nt">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
  <span class="nt">&quot;kvstore&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;driver&quot;</span><span class="p">:</span> <span class="s2">&quot;gcs&quot;</span><span class="p">,</span> <span class="nt">&quot;bucket&quot;</span><span class="p">:</span> <span class="s2">&quot;my-bucket&quot;</span><span class="p">},</span>
  <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;path/to/attributes.json&quot;</span><span class="p">,</span>
  <span class="nt">&quot;json_pointer&quot;</span><span class="p">:</span> <span class="s2">&quot;/a/2/b&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../zarr/index.html" class="btn btn-neutral float-right" title="zarr Driver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../array/index.html" class="btn btn-neutral float-left" title="array Driver" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020 The TensorStore Authors.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>